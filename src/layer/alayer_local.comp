% gcc layer.o -o alayer_local -L. -llayer_local
layer.o: In function `main':
layer.c:(.text+0x10): undefined reference to `num'
layer.c:(.text+0x19): undefined reference to `num'
./liblayer_local.a(layer_sub2.o): In function `func2':
layer_sub2.c:(.text+0x6): undefined reference to `num'
layer_sub2.c:(.text+0xf): undefined reference to `num'
collect2: error: ld returned 1 exit status
% 
